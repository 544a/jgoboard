<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Board</title>
  <style type="text/css">
    #messages {
      border: 1px solid #ddd;
      background-color: #eee;
      width: 400px;
      height: 400px;
    }

    #controls {
      border: 1px solid #ddd;
      background-color: #eee;
      width: 300px;
      padding: 4px;
      margin: 0 auto;
    }

    #controls a {
      padding: 0 4px;
      color: black;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
</head>
<body>

<div style="float: left; text-align: center">
  <div id="board"></div>

  <p id="controls">
  <a href="#" onclick="move(-2); return false;"><i class="fa fa-fast-backward"></i></a>
  <a href="#" onclick="move(-1); return false;"><i class="fa fa-step-backward"></i></a>
  Move: <strong id="move">1</strong>
  <a href="#" onclick="move(1); return false;"><i class="fa fa-step-forward"></i></a>
  <a href="#" onclick="move(2); return false;"><i class="fa fa-fast-forward"></i></a>
  Variation:
  <a href="#" onclick="move(0); return false;"><i title="variation" class="fa fa-arrows-v"></i></a> <span id="variation">1</span> / <span id="variations">1</span>
  </p>
</div>

<div style="float: left;">
  <p id="messages"></p>
</div>

<div style="clear: both;"></div>

<script type="text/javascript" src="dist/jgoboard-latest.js"></script>
<script type="text/javascript" src="medium/board.js"></script>
<script type="text/javascript" src="large/board.js"></script>
<script type="text/javascript">
var jrecord, moveNum = 1;

function move(dir) {
  var node, vars = jrecord.getVariations();

  switch(dir) {
    case -1:
      jrecord.previous();
      moveNum--;
      break;
    case 1:
      jrecord.next();
      moveNum++;
      break;
    case 2:
      while(jrecord.next() != null)
        moveNum++;
      break;
    case -2:
      jrecord.first();
      moveNum = 0;
      break;
    case 0: // cycle variations
      jrecord.setVariation((jrecord.getVariation() + 1) % jrecord.getVariations());
      break;
  }

  var comment = jrecord.getCurrentNode().comment;
  $('#move').html(moveNum);
  $('#messages').html(comment ? comment : '');
  $('#variation').html(jrecord.getVariation()+1);
  $('#variations').html(jrecord.getVariations());
}

$(document).ready(function() {
  $.ajax('http://static.jgoboard.com/sgf/shusaku.sgf', {
    complete: function(resp) {
      var jsetup;

      jrecord = JGO.sgf.load(resp.responseText, true);

      var comment = jrecord.getCurrentNode().comment;
      $('#messages').html(comment ? comment : '');
      $('#variation').html(jrecord.getVariation()+1);
      $('#variations').html(jrecord.getVariations());

      if(!(jrecord instanceof JGO.Record)) {
        alert('Empty SGF or multiple games in one SGF not supported!');
        return;
      }

      jsetup = new JGO.Setup(jrecord.jboard, JGO.BOARD.mediumBW);
      jsetup.create('board', function(canvas) {});
    }
  });
});
</script>

</body>
</html>
